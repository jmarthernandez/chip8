package main

import (
	"flag"
	"io/ioutil"

	"github.com/jmarthernandez/chip8"
)

func check(e error) {
	if e != nil {
		panic(e)
	}
}

func main() {
	pathPtr := flag.String("path", "roms/invaders", "path to ROM")
	flag.Parse()
	rom, err := ioutil.ReadFile(*pathPtr)
	check(err)
	// fakeRom := []byte{0x12, 0x25, 0x53, 0x50, 0x41, 0x43, 0x45, 0x20, 0x49, 0x4e, 0x56, 0x41, 0x44, 0x45, 0x52, 0x03,0x12, 0x25, 0x53, 0x50, 0x41, 0x43, 0x45, 0x20, 0x49, 0x4e, 0x56, 0x41, 0x44, 0x45, 0x52, 0x03}
	cpu := chip8.NewCPU()
	cpu.LoadRom(rom)
	cpu.Run()
}
